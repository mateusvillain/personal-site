(()=>{var T=document.querySelectorAll(".scroll-float"),r=document.querySelector(".scroll-container"),v=0;function g(){let t=window.innerWidth<=768,e=t?r?r.scrollTop:0:v;T.forEach((o,n)=>{let s=.3+n%3*.1,u=Math.sin(e*.005+n)*100*s,d=t?Math.cos(e*.005+n)*10*s:0,i=Math.sin(e*.003+n)*12*s;o.style.transform=`translate(${u}px, ${d}px) rotate(${i}deg)`})}r&&r.addEventListener("scroll",g);g();var l=null,c=0,a=0,f=0,h=0;function I(){if(!r)return null;let t=r.parentElement;t&&t.classList.contains("hscroll-wrapper")&&(t.parentNode.insertBefore(r,t),t.remove());let e=r.querySelector(".scroll-track");if(!e){for(e=document.createElement("div"),e.className="scroll-track";r.firstChild;)e.appendChild(r.firstChild);r.appendChild(e)}return e}function E(){if(!r||(l=I(),!l))return;let t=r.clientWidth,e=l.scrollWidth;f=Math.max(0,e-t),a=Math.min(Math.max(a,0),f),c=Math.min(Math.max(c,0),f),p()}function p(){l&&(l.style.transform=`translate3d(${-c}px, 0, 0)`,v=c,g())}function M(){let t=a-c;if(Math.abs(t)<.1){c=a,p(),h=0;return}c+=t*.12,p(),h=requestAnimationFrame(M)}function k(){h||(h=requestAnimationFrame(M))}function S(t){if(window.innerWidth<=768||!l)return;let e=t.deltaMode===1?16:t.deltaMode===2?window.innerHeight:1,o=(t.deltaX||0)*e,n=(t.deltaY||0)*e,s=Math.abs(o)>Math.abs(n)?o:n;s!==0&&(t.preventDefault(),a=Math.min(Math.max(a+s,0),f),k())}function A(t){if(window.innerWidth<=768||!l)return;let e=0,o=80,n=r.clientWidth*.9;t.key==="ArrowRight"?e=o:t.key==="ArrowLeft"?e=-o:t.key==="PageDown"?e=n:t.key==="PageUp"?e=-n:t.key==="Home"?e=-a:t.key==="End"&&(e=f-a),e!==0&&(t.preventDefault(),a=Math.min(Math.max(a+e,0),f),k())}window.addEventListener("wheel",S,{passive:!1,capture:!0});window.addEventListener("keydown",A);window.addEventListener("resize",E);E();var w=document.getElementById("book"),C=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting?w.style.transform="rotate(-15deg)":w.style.transform="rotate(15deg)"})},{threshold:.3});C.observe(w);var m=localStorage.getItem("lang")||"en";function b(t){fetch(`./lang/${t}.json`).then(e=>e.json()).then(e=>{document.querySelectorAll("[data-i18n]").forEach(o=>{let n=o.getAttribute("data-i18n");o.innerText=e[n]}),localStorage.setItem("lang",t),document.documentElement.lang=t==="pt"?"pt-BR":"en"})}b(m);document.getElementById("lang-switch").addEventListener("click",()=>{m=m==="pt"?"en":"pt",b(m)});document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelectorAll(".type-line"),e=45,o=!1;function n(){if(o)return;o=!0;let d=0;t.forEach(i=>{let y=i.textContent;i.textContent="",setTimeout(()=>{[...y].forEach((x,L)=>{setTimeout(()=>{i.textContent+=x},L*e)})},d),d+=y.length*e+400})}if(!("IntersectionObserver"in window)){n();return}let s=t[0],u=new IntersectionObserver(d=>{d.forEach(i=>{i.isIntersecting&&(n(),u.unobserve(i.target))})},{threshold:.4});u.observe(s)});})();
